<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thông báo - E-Shop</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .notification-card {
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border-left: 4px solid transparent;
        }
        
        .notification-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .notification-card.unread {
            background-color: #f0f7ff;
            border-left-color: #3b82f6;
        }
        
        .notification-card.unread .notification-badge {
            display: inline-block;
        }
        
        .notification-badge {
            display: none;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: #3b82f6;
            margin-right: 8px;
        }
        
        .tab-item {
            position: relative;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }
        
        .tab-item.active {
            color: #ff424f;
            border-bottom-color: #ff424f;
        }
        
        .tab-item .count-badge {
            position: absolute;
            top: 0px;
            right: -10px;
            background-color: #ff424f;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }
        
        .empty-notifications {
            opacity: 0.6;
            transition: all 0.3s ease;
        }
        
        .filter-btn {
            transition: all 0.2s ease;
            border-radius: 20px;
            padding: 6px 16px;
            background-color: #f3f4f6;
        }
        
        .filter-btn.active, .filter-btn:hover {
            background-color: #ff424f;
            color: white;
        }
        
        .notification-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 16px;
            flex-shrink: 0;
        }
        
        .notification-icon.order {
            background-color: #dbeafe;
            color: #2563eb;
        }
        
        .notification-icon.promotion {
            background-color: #ffedd5;
            color: #f97316;
        }
        
        .notification-icon.wallet {
            background-color: #dcfce7;
            color: #16a34a;
        }
        
        .notification-icon.system {
            background-color: #f3e8ff;
            color: #9333ea;
        }
        
        .time-ago {
            font-size: 12px;
            color: #6b7280;
        }
        
        .content-container {
            max-height: calc(100vh - 200px);
            overflow-y: auto;
        }
        
        .mark-all-read {
            transition: all 0.2s ease;
        }
        
        .mark-all-read:hover {
            color: #ff424f;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Profile Header -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-6">
        <div class="flex flex-col md:flex-row md:items-center md:justify-between">
            <div>
                <h1 class="text-2xl font-bold text-gray-800">Thông báo</h1>
                <p class="text-gray-600 mt-1">Cập nhật mới nhất về đơn hàng, khuyến mãi và hệ thống</p>
            </div>
            <div class="mt-4 md:mt-0">
                <button class="mark-all-read flex items-center text-blue-600">
                    <i class="fas fa-check-circle mr-2"></i>
                    <span>Đánh dấu tất cả đã đọc</span>
                </button>
            </div>
        </div>
    </div>
            
    <!-- Notification Tabs -->
    <div class="bg-white rounded-lg shadow-md p-4 mb-6">
        <div class="flex overflow-x-auto space-x-6 pb-2">
            <div class="tab-item active flex items-center px-2 py-3 cursor-pointer" data-tab="all">
                <i class="fas fa-bell mr-2"></i>
                <span>Tất cả</span>
                <span class="count-badge">15</span>
            </div>
            
            <div class="tab-item flex items-center px-2 py-3 cursor-pointer" data-tab="order">
                <i class="fas fa-shopping-bag mr-2"></i>
                <span>Cập nhật đơn hàng</span>
                <span class="count-badge">7</span>
            </div>
            
            <div class="tab-item flex items-center px-2 py-3 cursor-pointer" data-tab="promotion">
                <i class="fas fa-percentage mr-2"></i>
                <span>Khuyến mãi</span>
                <span class="count-badge">5</span>
            </div>
            
            <div class="tab-item flex items-center px-2 py-3 cursor-pointer" data-tab="wallet">
                <i class="fas fa-wallet mr-2"></i>
                <span>Cập nhật ví</span>
                <span class="count-badge">2</span>
            </div>
            
            <div class="tab-item flex items-center px-2 py-3 cursor-pointer" data-tab="system">
                <i class="fas fa-cog mr-2"></i>
                <span>Cập nhật hệ thống</span>
                <span class="count-badge">1</span>
            </div>
        </div>
    </div>
            
    <!-- Filter Controls -->
    <div class="bg-white rounded-lg shadow-md p-4 mb-6">
        <div class="flex flex-wrap gap-2">
            <button class="filter-btn active" data-filter="all">Tất cả</button>
            <button class="filter-btn" data-filter="unread">Chưa đọc</button>
            <button class="filter-btn" data-filter="today">Hôm nay</button>
            <button class="filter-btn" data-filter="week">Tuần này</button>
        </div>
    </div>
            
    <!-- Notifications List -->
    <div id="notifications-container" class="bg-white rounded-lg shadow-md">
        <!-- Empty State -->
        <div id="empty-state" class="empty-notifications p-8 text-center hidden">
            <div class="mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4">
                <i class="fas fa-bell-slash text-3xl text-gray-400"></i>
            </div>
            <h3 class="text-xl font-bold text-gray-700 mb-2">Không có thông báo nào</h3>
            <p class="text-gray-500 mb-6">Bạn không có thông báo nào trong danh mục này</p>
        </div>
        
        <!-- Notifications List -->
        <div class="content-container" id="notifications-list">
            <!-- Order Notifications -->
            <div class="notification-card unread p-4 border-b border-gray-100" data-type="order">
                <div class="flex items-start">
                    <div class="notification-icon order">
                        <i class="fas fa-truck"></i>
                    </div>
                    
                    <div class="flex-1">
                        <div class="flex justify-between items-start">
                            <div>
                                <div class="flex items-center">
                                    <span class="notification-badge"></span>
                                    <h3 class="font-bold text-gray-800">Đơn hàng #DH230625 đang trên đường giao đến bạn</h3>
                                </div>
                                <p class="text-gray-600 mt-1">Đơn hàng của bạn đã được giao cho đơn vị vận chuyển. Dự kiến giao hàng: 28/06/2025</p>
                            </div>
                            <span class="time-ago">10 phút trước</span>
                        </div>
                        
                        <div class="mt-3 flex space-x-2">
                            <button class="text-sm px-3 py-1 bg-blue-100 text-blue-800 rounded-full hover:bg-blue-200">
                                Theo dõi đơn hàng
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="notification-card unread p-4 border-b border-gray-100" data-type="order">
                <div class="flex items-start">
                    <div class="notification-icon order">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    
                    <div class="flex-1">
                        <div class="flex justify-between items-start">
                            <div>
                                <div class="flex items-center">
                                    <span class="notification-badge"></span>
                                    <h3 class="font-bold text-gray-800">Đơn hàng #DH230624 đã giao thành công</h3>
                                </div>
                                <p class="text-gray-600 mt-1">Đơn hàng iPhone 15 Pro Max 256GB của bạn đã được giao thành công lúc 15:23 ngày 25/06/2025</p>
                            </div>
                            <span class="time-ago">2 giờ trước</span>
                        </div>
                        
                        <div class="mt-3 flex space-x-2">
                            <button class="text-sm px-3 py-1 bg-blue-100 text-blue-800 rounded-full hover:bg-blue-200">
                                Đánh giá sản phẩm
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Promotion Notifications -->
            <div class="notification-card unread p-4 border-b border-gray-100" data-type="promotion">
                <div class="flex items-start">
                    <div class="notification-icon promotion">
                        <i class="fas fa-tag"></i>
                    </div>
                    
                    <div class="flex-1">
                        <div class="flex justify-between items-start">
                            <div>
                                <div class="flex items-center">
                                    <span class="notification-badge"></span>
                                    <h3 class="font-bold text-gray-800">MÃ SHOPEE CHOICE VỀ VÍ</h3>
                                </div>
                                <p class="text-gray-600 mt-1">Bạn đã nhận voucher giảm ngay 25% khi mua hàng tại Shopee Choice! Hiệu lực từ ngày: 27-06-2025 → Bấm để xem Shopee Choice!</p>
                            </div>
                            <span class="time-ago">5 giờ trước</span>
                        </div>
                        
                        <div class="mt-3 flex space-x-2">
                            <button class="text-sm px-3 py-1 bg-orange-100 text-orange-800 rounded-full hover:bg-orange-200">
                                Sử dụng ngay
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="notification-card p-4 border-b border-gray-100" data-type="promotion">
                <div class="flex items-start">
                    <div class="notification-icon promotion">
                        <i class="fas fa-gift"></i>
                    </div>
                    
                    <div class="flex-1">
                        <div class="flex justify-between items-start">
                            <div>
                                <h3 class="font-bold text-gray-800">Siêu Sale Cuối Tuần - Giảm đến 50%</h3>
                                <p class="text-gray-600 mt-1">Cơ hội cuối cùng! Hàng ngàn sản phẩm giảm giá sâu, đặc biệt điện thoại, laptop, đồ gia dụng. Chương trình kết thúc 23:59 ngày 27/06/2025</p>
                            </div>
                            <span class="time-ago">1 ngày trước</span>
                        </div>
                        
                        <div class="mt-3 flex space-x-2">
                            <button class="text-sm px-3 py-1 bg-orange-100 text-orange-800 rounded-full hover:bg-orange-200">
                Xem sản phẩm
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Wallet Notifications -->
            <div class="notification-card unread p-4 border-b border-gray-100" data-type="wallet">
                <div class="flex items-start">
                    <div class="notification-icon wallet">
                        <i class="fas fa-coins"></i>
                    </div>
                    
                    <div class="flex-1">
                        <div class="flex justify-between items-start">
                            <div>
                                <div class="flex items-center">
                                    <span class="notification-badge"></span>
                                    <h3 class="font-bold text-gray-800">Giao dịch hoàn tiền thành công</h3>
                                </div>
                                <p class="text-gray-600 mt-1">Hoàn tiền đơn hàng #DH230623 đã thành công. Số tiền 350.000đ đã được chuyển vào ví E-Shop của bạn</p>
                            </div>
                            <span class="time-ago">1 ngày trước</span>
                        </div>
                        
                        <div class="mt-3 flex space-x-2">
                            <button class="text-sm px-3 py-1 bg-green-100 text-green-800 rounded-full hover:bg-green-200">
                                Xem chi tiết
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="notification-card p-4 border-b border-gray-100" data-type="wallet">
                <div class="flex items-start">
                    <div class="notification-icon wallet">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    
                    <div class="flex-1">
                        <div class="flex justify-between items-start">
                            <div>
                                <h3 class="font-bold text-gray-800">Liên kết ngân hàng thành công</h3>
                                <p class="text-gray-600 mt-1">Bạn đã liên kết thành công tài khoản ngân hàng Vietcombank với ví E-Shop. Giờ đây bạn có thể rút tiền dễ dàng</p>
                            </div>
                            <span class="time-ago">3 ngày trước</span>
                        </div>
                        
                        <div class="mt-3 flex space-x-2">
                            <button class="text-sm px-3 py-1 bg-green-100 text-green-800 rounded-full hover:bg-green-200">
                                Quản lý ví
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- System Notifications -->
            <div class="notification-card p-4 border-b border-gray-100" data-type="system">
                <div class="flex items-start">
                    <div class="notification-icon system">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    
                    <div class="flex-1">
                        <div class="flex justify-between items-start">
                            <div>
                                <h3 class="font-bold text-gray-800">Cập nhật chính sách bảo mật</h3>
                                <p class="text-gray-600 mt-1">Chúng tôi đã cập nhật Điều khoản dịch vụ và Chính sách bảo mật. Vui lòng xem lại để hiểu rõ hơn về cách chúng tôi bảo vệ thông tin của bạn</p>
                            </div>
                            <span class="time-ago">5 ngày trước</span>
                        </div>
                        
                        <div class="mt-3 flex space-x-2">
                            <button class="text-sm px-3 py-1 bg-purple-100 text-purple-800 rounded-full hover:bg-purple-200">
                                Xem chính sách
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="notification-card p-4 border-b border-gray-100" data-type="promotion">
                <div class="flex items-start">
                    <div class="notification-icon promotion">
                        <i class="fas fa-bolt"></i>
                    </div>
                    
                    <div class="flex-1">
                        <div class="flex justify-between items-start">
                            <div>
                                <h3 class="font-bold text-gray-800">Flash Sale 0Đ - 21H HÔM NAY</h3>
                                <p class="text-gray-600 mt-1">Săn ngay sản phẩm giá 0Đ tại Flash Sale 21H hôm nay. Đừng bỏ lỡ cơ hội mua hàng giá tốt!</p>
                            </div>
                            <span class="time-ago">1 tuần trước</span>
                        </div>
                        
                        <div class="mt-3 flex space-x-2">
                            <button class="text-sm px-3 py-1 bg-orange-100 text-orange-800 rounded-full hover:bg-orange-200">
                Tham gia ngay
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="notification-card p-4 border-b border-gray-100" data-type="order">
                <div class="flex items-start">
                    <div class="notification-icon order">
                        <i class="fas fa-box-open"></i>
                    </div>
                    
                    <div class="flex-1">
                        <div class="flex justify-between items-start">
                            <div>
                                <h3 class="font-bold text-gray-800">Đơn hàng #DH230618 đã được xác nhận</h3>
                                <p class="text-gray-600 mt-1">Đơn hàng của bạn đang được chuẩn bị. Chúng tôi sẽ thông báo khi đơn hàng sẵn sàng giao</p>
                            </div>
                            <span class="time-ago">1 tuần trước</span>
                        </div>
                        
                        <div class="mt-3 flex space-x-2">
                            <button class="text-sm px-3 py-1 bg-blue-100 text-blue-800 rounded-full hover:bg-blue-200">
                                Xem chi tiết
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Hàm gửi chiều cao về trang chủ
        function sendHeightToParent() {
            const height = Math.max(
                document.body.scrollHeight,
                document.body.offsetHeight,
                document.documentElement.clientHeight,
                document.documentElement.scrollHeight,
                document.documentElement.offsetHeight
            );
            
            // Gửi chiều cao về trang chủ
            window.parent.postMessage({
                type: 'resize',
                height: height
            }, '*');
        }

        // Gửi chiều cao khi trang tải xong
        window.addEventListener('load', sendHeightToParent);
        
        // Gửi chiều cao khi cửa sổ thay đổi kích thước
        window.addEventListener('resize', sendHeightToParent);
        
        // Gửi chiều cao khi có thay đổi nội dung (MutationObserver)
        const observer = new MutationObserver(sendHeightToParent);
        observer.observe(document.body, {
            childList: true,
            subtree: true,
            attributes: true,
            characterData: true
        });

        // Trả lời khi nhận được yêu cầu từ trang chủ
        window.addEventListener('message', (event) => {
            if (event.data === 'getHeight') {
                sendHeightToParent();
            }
        });
    
        // Tab Switching
        document.querySelectorAll('.tab-item').forEach(tab => {
            tab.addEventListener('click', function() {
                // Remove active class from all tabs
                document.querySelectorAll('.tab-item').forEach(t => {
                    t.classList.remove('active');
                });
                
                // Add active class to clicked tab
                this.classList.add('active');
                
                const tabType = this.dataset.tab;
                filterNotifications();
            });
        });
        
        // Filter buttons
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                // Remove active class from all filter buttons
                document.querySelectorAll('.filter-btn').forEach(b => {
                    b.classList.remove('active');
                });
                
                // Add active class to clicked button
                this.classList.add('active');
                
                filterNotifications();
            });
        });
        
        // Mark all as read
        document.querySelector('.mark-all-read').addEventListener('click', function() {
            document.querySelectorAll('.notification-card.unread').forEach(card => {
                card.classList.remove('unread');
            });
            
            // Update badge counts
            document.querySelectorAll('.count-badge').forEach(badge => {
                badge.textContent = '0';
            });
        });
        
        // Mark single notification as read
        document.querySelectorAll('.notification-card').forEach(card => {
            card.addEventListener('click', function() {
                this.classList.remove('unread');
                
                // Update badge count for the tab
                const type = this.dataset.type;
                const tab = document.querySelector(`.tab-item[data-tab="${type}"]`);
                if (tab) {
                    const badge = tab.querySelector('.count-badge');
                    if (badge) {
                        const count = parseInt(badge.textContent);
                        if (count > 0) {
                            badge.textContent = (count - 1).toString();
                        }
                    }
                }
                
                // Also update "All" tab
                const allTab = document.querySelector('.tab-item[data-tab="all"]');
                if (allTab) {
                    const badge = allTab.querySelector('.count-badge');
                    if (badge) {
                        const count = parseInt(badge.textContent);
                        if (count > 0) {
                            badge.textContent = (count - 1).toString();
                        }
                    }
                }
            });
        });
        
        // Filter notifications
        function filterNotifications() {
            const activeTab = document.querySelector('.tab-item.active').dataset.tab;
            const activeFilter = document.querySelector('.filter-btn.active').dataset.filter;
            
            let visibleCount = 0;
            
            document.querySelectorAll('.notification-card').forEach(card => {
                const type = card.dataset.type;
                const isUnread = card.classList.contains('unread');
                
                // Filter by tab
                const tabMatch = (activeTab === 'all') || (activeTab === type);
                
                // Filter by status
                let filterMatch = true;
                if (activeFilter === 'unread') {
                    filterMatch = isUnread;
                } else if (activeFilter === 'today') {
                    // In a real app, this would check actual dates
                    filterMatch = card.querySelector('.time-ago').textContent.includes('giờ') || 
                                  card.querySelector('.time-ago').textContent.includes('phút');
                } else if (activeFilter === 'week') {
                    // Show all for demo
                    filterMatch = true;
                }
                
                if (tabMatch && filterMatch) {
                    card.style.display = 'flex';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });
            
            // Show empty state if no notifications match
            const emptyState = document.getElementById('empty-state');
            if (visibleCount === 0) {
                emptyState.classList.remove('hidden');
            } else {
                emptyState.classList.add('hidden');
            }
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', filterNotifications);
    </script>
</body>
</html>