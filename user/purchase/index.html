<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đơn hàng của tôi - E-Shop</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f5f7fa;
            color: #1e293b;
        }
        
        .order-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-pending {
            background-color: #ffedd5;
            color: #f97316;
        }
        
        .status-processing {
            background-color: #dbeafe;
            color: #3b82f6;
        }
        
        .status-shipping {
            background-color: #fef3c7;
            color: #d97706;
        }
        
        .status-delivered {
            background-color: #dcfce7;
            color: #16a34a;
        }
        
        .status-cancelled {
            background-color: #fee2e2;
            color: #ef4444;
        }
        
        .order-card {
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        
        .order-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .filter-btn {
            transition: all 0.2s ease;
            border-radius: 20px;
            padding: 6px 16px;
        }
        
        .filter-btn.active, .filter-btn:hover {
            background-color: #ff424f;
            color: white;
        }
        
        .pagination-btn {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            transition: all 0.2s;
        }
        
        .pagination-btn.active {
            background-color: #ff424f;
            color: white;
        }
        
        .pagination-btn:not(.disabled):hover {
            background-color: #f0f0f0;
        }
        
        .empty-state {
            opacity: 0.6;
            transition: all 0.3s ease;
        }
        
        .timeline-item {
            position: relative;
            padding-left: 28px;
            margin-bottom: 24px;
        }
        
        .timeline-item:before {
            content: '';
            position: absolute;
            left: 0;
            top: 8px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background-color: #d1d5db;
        }
        
        .timeline-item.active:before {
            background-color: #ff424f;
            box-shadow: 0 0 0 4px rgba(255, 66, 79, 0.2);
        }
        
        .timeline-item.completed:before {
            background-color: #10b981;
        }
        
        .timeline-connector {
            position: absolute;
            left: 7px;
            top: 24px;
            bottom: -24px;
            width: 2px;
            background-color: #e5e7eb;
        }
        
        .timeline-item:last-child .timeline-connector {
            display: none;
        }
        
        .status-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
            margin-left: 8px;
        }
        
        .badge-pending {
            background-color: #ffedd5;
            color: #f97316;
        }
        
        .badge-shipping {
            background-color: #dbeafe;
            color: #3b82f6;
        }
        
        .badge-delivered {
            background-color: #dcfce7;
            color: #16a34a;
        }
        
        .badge-cancelled {
            background-color: #fee2e2;
            color: #ef4444;
        }
        
        .action-btn {
            transition: all 0.2s ease;
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
        }
        
        .search-input {
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            box-shadow: 0 0 0 3px rgba(255, 66, 79, 0.2);
            border-color: #ff424f;
        }
        
        .status-filter-container {
            overflow-x: auto;
            scrollbar-width: thin;
            scrollbar-color: #ff424f #f3f4f6;
            padding-bottom: 8px;
        }
        
        .status-filter-container::-webkit-scrollbar {
            height: 6px;
        }
        
        .status-filter-container::-webkit-scrollbar-track {
            background: #f3f4f6;
            border-radius: 10px;
        }
        
        .status-filter-container::-webkit-scrollbar-thumb {
            background-color: #ff424f;
            border-radius: 10px;
        }
        
        .hidden {
            display: none;
        }
        
        /* Modal styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-header {
            padding: 16px 24px;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-title {
            font-size: 20px;
            font-weight: 600;
            color: #1f2937;
        }
        
        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #6b7280;
        }
        
        .modal-body {
            padding: 24px;
        }
        
        .modal-footer {
            padding: 16px 24px;
            border-top: 1px solid #e5e7eb;
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }
        
        .btn {
            padding: 8px 16px;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-secondary {
            background-color: #f3f4f6;
            color: #374151;
            border: 1px solid #d1d5db;
        }
        
        .btn-secondary:hover {
            background-color: #e5e7eb;
        }
        
        .btn-primary {
            background-color: #ff424f;
            color: white;
            border: 1px solid #ff424f;
        }
        
        .btn-primary:hover {
            background-color: #e53e3e;
        }
        
        .review-display-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .review-modal-content {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .review-modal-header {
            padding: 20px;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #ff424f;
            border-top-left-radius: 12px;
            border-top-right-radius: 12px;
            color: white;
        }
        
        .review-modal-title {
            font-size: 20px;
            font-weight: 600;
        }
        
        .review-close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: white;
        }
        
        .review-modal-body {
            padding: 25px;
        }

        .product-info {
            display: flex;
            align-items: flex-start;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        
        .product-image {
            width: 100px;
            height: 100px;
            border-radius: 8px;
            object-fit: cover;
            margin-right: 15px;
            border: 1px solid #eee;
        }
        
        .product-details {
            flex: 1;
        }
        
        .product-name {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .product-order {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }
        
        .review-details {
            margin-bottom: 20px;
        }
        
        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .reviewer {
            font-weight: 600;
            color: #333;
        }
        
        .review-date {
            color: #666;
            font-size: 14px;
        }
        
        .rating-display {
            display: flex;
            gap: 5px;
            margin-bottom: 15px;
        }
        
        .rating-star {
            font-size: 24px;
            color: #ffd700;
        }
        
        .review-content {
            line-height: 1.6;
            color: #333;
            padding: 15px;
            background-color: #f9fafb;
            border-radius: 8px;
            margin-top: 15px;
        }
        
        .review-images-display {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .review-image {
            width: 100px;
            height: 100px;
            border-radius: 6px;
            object-fit: cover;
            cursor: pointer;
            transition: transform 0.2s;
            border: 1px solid #eee;
        }
        
        .review-image:hover {
            transform: scale(1.05);
        }
        
        .no-images {
            font-style: italic;
            color: #888;
            margin-top: 10px;
        }
        
        .review-modal-footer {
            padding: 15px 20px;
            display: flex;
            justify-content: flex-end;
            border-top: 1px solid #eee;
        }
        
        .close-review-btn {
            padding: 10px 20px;
            background: #ff424f;
            color: white;
            border: none;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .close-review-btn:hover {
            background: #e53e3e;
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Profile Header -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-6">
        <div class="flex flex-col md:flex-row md:items-center md:justify-between">
            <div>
                <h1 class="text-2xl font-bold text-gray-800 mb-2">Đơn hàng của tôi</h1>
                <p class="text-gray-600 mt-1">Quản lý và theo dõi các đơn hàng của bạn</p>
            </div>
            <div class="mt-4 md:mt-0 flex items-center">
                <button id="new-order-btn" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg flex items-center transition-all duration-300 shadow-md hover:shadow-lg">
                    <i class="fas fa-plus mr-2"></i> Đặt hàng mới
                </button>
            </div>
        </div>
    </div>
        
    <!-- Filter Section -->
    <div class="bg-white rounded-lg shadow-md p-4 mb-6">
        <div class="status-filter-container flex pb-1">
            <div class="flex flex-nowrap gap-2">
                <button class="filter-btn active" data-status="all">Tất cả đơn hàng</button>
                <button class="filter-btn" data-status="pending">Chờ xác nhận</button>
                <button class="filter-btn" data-status="processing">Đang chuẩn bị</button>
                <button class="filter-btn" data-status="shipping">Đang vận chuyển</button>
                <button class="filter-btn" data-status="delivered">Đã giao</button>
                <button class="filter-btn" data-status="cancelled">Đã hủy</button>
            </div>
        </div>
        
        <div class="mt-4 flex flex-col md:flex-row gap-4">
            <div class="flex-1">
                <label class="block text-sm font-medium text-gray-700 mb-1">Tìm kiếm đơn hàng</label>
                <div class="relative">
                    <input id="order-search" type="text" placeholder="Nhập mã đơn hàng..." class="search-input w-full p-2 border rounded-lg pl-10 focus:outline-none">
                    <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                </div>
            </div>
            
            <div class="w-full md:w-48">
                <label class="block text-sm font-medium text-gray-700 mb-1">Thời gian</label>
                <select id="time-filter" class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-200">
                    <option value="30">30 ngày gần đây</option>
                    <option value="90">3 tháng gần đây</option>
                    <option value="180">6 tháng gần đây</option>
                    <option value="2025">Năm 2025</option>
                    <option value="all">Tất cả</option>
                </select>
            </div>
        </div>
    </div>

    <!-- Orders List -->
    <div id="orders-container" class="space-y-4">
        <!-- Đơn hàng Đã giao -->
        <div class="bg-white p-6 rounded-lg shadow-md order-card" data-status="delivered">
            <div class="flex justify-between items-center mb-4">
                <div>
                    <span class="font-bold">Mã đơn: ĐH230901</span>
                    <span class="order-status status-delivered ml-4">Đã giao</span>
                    <div class="text-sm text-gray-500">Ngày đặt: 01/09/2025</div>
                </div>
                <div class="text-right">
                    <div class="text-red-600 font-bold text-lg">1.110.000₫</div>
                    <div class="text-sm text-gray-500">3 sản phẩm</div>
                </div>
            </div>
            <div class="space-y-3">
                <div class="flex items-center">
                    <img src="https://via.placeholder.com/60x60?text=S1" class="w-16 h-16 rounded mr-4">
                    <div>
                        <div class="font-medium">Tai nghe Bluetooth Sony WH-1000XM5</div>
                        <div class="text-sm text-gray-500">Số lượng: 1 - Giá: 1.000.000₫</div>
                    </div>
                </div>
                <div class="flex items-center">
                    <img src="https://via.placeholder.com/60x60?text=S2" class="w-16 h-16 rounded mr-4">
                    <div>
                        <div class="font-medium">Ốp lưng iPhone 14 Pro Max</div>
                        <div class="text-sm text-gray-500">Số lượng: 1 - Giá: 250.000₫</div>
                    </div>
                </div>
                <div class="flex items-center">
                    <img src="https://via.placeholder.com/60x60?text=S3" class="w-16 h-16 rounded mr-4">
                    <div>
                        <div class="font-medium">Củ sạc Apple</div>
                        <div class="text-sm text-gray-500">Số lượng: 1 - Giá: 800.000₫</div>
                    </div>
                </div>
            </div>
            <div class="flex flex-wrap gap-2 justify-end mt-4">
                <button class="border px-4 py-2 rounded hover:bg-gray-50">Mua lại</button>
                <button class="border px-4 py-2 rounded text-red-600 hover:bg-gray-50 return-request" data-id="ĐH230901"><a href="return.html">Yêu cầu Trả hàng/Hoàn tiền</a></button>
                <button class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Xác nhận</button>
                <button class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 review-btn" data-id="ĐH230901" data-product="Trà Đông Trùng Hạ Thảo Long Nhãn Tứ Vị An Nhiên">Đánh giá</button>
                <button class="bg-gray-100 px-4 py-2 rounded hover:bg-gray-200 view-detail" data-id="ĐH230901">Chi tiết</button>
            </div>
        </div>

        <!-- Đơn hàng Đang vận chuyển -->
        <div class="bg-white p-6 rounded-lg shadow-md order-card" data-status="shipping">
            <div class="flex justify-between items-center mb-4">
                <div>
                    <span class="font-bold">Mã đơn: ĐH230825</span>
                    <span class="order-status status-shipping ml-4">Đang vận chuyển</span>
                    <div class="text-sm text-gray-500">Ngày đặt: 25/08/2025</div>
                </div>
                <div class="text-right">
                    <div class="text-red-600 font-bold text-lg">18.680.000₫</div>
                    <div class="text-sm text-gray-500">2 sản phẩm</div>
                </div>
            </div>
            <div class="space-y-3">
                <div class="flex items-center">
                    <img src="https://via.placeholder.com/60x60?text=S4" class="w-16 h-16 rounded mr-4">
                    <div>
                        <div class="font-medium">Laptop Dell XPS 13 9315</div>
                        <div class="text-sm text-gray-500">Số lượng: 1 - Giá: 17.500.000₫</div>
                    </div>
                </div>
                <div class="flex items-center">
                    <img src="https://via.placeholder.com/60x60?text=S5" class="w-16 h-16 rounded mr-4">
                    <div>
                        <div class="font-medium">Túi chống sốc laptop 15.6 inch</div>
                        <div class="text-sm text-gray-500">Số lượng: 1 - Giá: 600.000₫</div>
                    </div>
                </div>
            </div>
            <div class="flex flex-wrap gap-2 justify-end mt-4">
                <button class="bg-gray-100 px-4 py-2 rounded hover:bg-gray-200 view-detail" data-id="ĐH230825">Chi tiết</button>
            </div>
        </div>

        <!-- Đơn hàng Chờ xác nhận -->
        <div class="bg-white p-6 rounded-lg shadow-md order-card" data-status="pending">
            <div class="flex justify-between items-center mb-4">
                <div>
                    <span class="font-bold">Mã đơn: ĐH230815</span>
                    <span class="order-status status-pending ml-4">Chờ xác nhận</span>
                    <div class="text-sm text-gray-500">Ngày đặt: 15/08/2025</div>
                </div>
                <div class="text-right">
                    <div class="text-red-600 font-bold text-lg">280.000₫</div>
                    <div class="text-sm text-gray-500">1 sản phẩm</div>
                </div>
            </div>
            <div class="space-y-3">
                <div class="flex items-center">
                    <img src="https://via.placeholder.com/60x60?text=S6" class="w-16 h-16 rounded mr-4">
                    <div>
                        <div class="font-medium">Chuột không dây Logitech MX Master 3</div>
                        <div class="text-sm text-gray-500">Số lượng: 1 - Giá: 320.000₫</div>
                    </div>
                </div>
            </div>
            <div class="flex flex-wrap gap-2 justify-end mt-4">
                <button class="border px-4 py-2 rounded hover:bg-gray-50 cancel-order" data-id="ĐH230815">Hủy đơn</button>
                <button class="bg-gray-100 px-4 py-2 rounded hover:bg-gray-200 view-detail" data-id="ĐH230815">Chi tiết</button>
            </div>
        </div>
    </div>
    
    <!-- Pagination -->
    <div id="pagination-container" class="mt-8 flex justify-center">
        <div class="flex items-center gap-1">
            <button id="prev-page" class="pagination-btn disabled text-gray-300">
                <i class="fas fa-chevron-left"></i>
            </button>
            
            <button class="pagination-btn active">1</button>
            <button class="pagination-btn">2</button>
            <button class="pagination-btn">3</button>
            
            <span class="px-2 text-gray-500">...</span>
            
            <button class="pagination-btn">8</button>
            
            <button id="next-page" class="pagination-btn">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </div>

    <!-- Modal Chi tiết đơn hàng -->
    <div id="order-detail-modal" class="hidden modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Chi tiết đơn hàng <span id="modal-order-id" class="text-red-600">ĐH230901</span></h3>
                <button class="close-btn" id="close-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div class="md:col-span-2">
                        <h3 class="font-bold text-lg mb-4">Sản phẩm</h3>
                        <div id="order-items-container" class="space-y-4">
                            <div class="order-item flex items-center p-3 border rounded-lg">
                                <img src="https://via.placeholder.com/60x60?text=S1" alt="Tai nghe Bluetooth Sony WH-1000XM5" class="w-16 h-16 rounded-md object-cover">
                                <div class="ml-4 flex-1">
                                    <div class="font-medium">Tai nghe Bluetooth Sony WH-1000XM5</div>
                                    <div class="text-gray-500 text-sm mt-1">Số lượng: 1</div>
                                </div>
                                <div class="text-right">
                                    <div class="font-medium">1.000.000₫</div>
                                    <div class="text-gray-500 text-sm">1.000.000₫</div>
                                </div>
                            </div>
                            <div class="order-item flex items-center p-3 border rounded-lg">
                                <img src="https://via.placeholder.com/60x60?text=S2" alt="Ốp lưng iPhone 14 Pro Max" class="w-16 h-16 rounded-md object-cover">
                                <div class="ml-4 flex-1">
                                    <div class="font-medium">Ốp lưng iPhone 14 Pro Max</div>
                                    <div class="text-gray-500 text-sm mt-1">Số lượng: 1</div>
                                </div>
                                <div class="text-right">
                                    <div class="font-medium">250.000₫</div>
                                    <div class="text-gray-500 text-sm">250.000₫</div>
                                </div>
                            </div>
                            <div class="order-item flex items-center p-3 border rounded-lg">
                                <img src="https://via.placeholder.com/60x60?text=S3" alt="Củ sạc Apple" class="w-16 h-16 rounded-md object-cover">
                                <div class="ml-4 flex-1">
                                    <div class="font-medium">Củ sạc Apple</div>
                                    <div class="text-gray-500 text-sm mt-1">Số lượng: 1</div>
                                </div>
                                <div class="text-right">
                                    <div class="font-medium">800.000₫</div>
                                    <div class="text-gray-500 text-sm">800.000₫</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h3 class="font-bold text-lg mb-4">Tóm tắt đơn hàng</h3>
                        <div class="bg-gray-50 rounded-lg p-5 shadow-sm">
                            <div class="flex justify-between mb-3 pb-3 border-b">
                                <div class="font-medium">Trạng thái:</div>
                                <div>
                                    <span class="status-badge badge-delivered">Đã giao</span>
                                </div>
                            </div>
                            
                            <div class="space-y-2 mb-4">
                                <div class="flex justify-between">
                                    <div>Tạm tính:</div>
                                    <div id="subtotal-amount">2.050.000₫</div>
                                </div>
                                <div class="flex justify-between">
                                    <div>Phí vận chuyển:</div>
                                    <div id="shipping-fee">30.000₫</div>
                                </div>
                                <div class="flex justify-between">
                                    <div>Giảm giá:</div>
                                    <div id="discount-amount" class="text-green-600">-970.000₫</div>
                                </div>
                            </div>
                            
                            <div class="flex justify-between font-bold text-lg pt-4 border-t">
                                <div>Tổng cộng:</div>
                                <div id="total-amount" class="text-red-600">1.110.000₫</div>
                            </div>
                        </div>
                        
                        <div class="mt-6">
                            <h4 class="font-medium mb-2">Thông tin thanh toán</h4>
                            <div id="payment-info" class="text-sm">
                                <div class="flex items-center mb-3">
                                    <i class="fas fa-money-bill-wave text-green-500 text-xl mr-3"></i>
                                    <div>
                                        <div class="font-medium">Thanh toán khi nhận hàng (COD)</div>
                                        <div class="text-sm text-gray-500">Đã thanh toán: 01/09/2025</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-medium mb-2">Thông tin người nhận</h4>
                        <div id="recipient-info" class="bg-white border rounded-lg p-4">
                            <div class="mb-2"><span class="font-medium">Đơn vị vận chuyển:</span> GHN</div>
                            <div class="mb-2"><span class="font-medium">Họ tên:</span> Nguyễn Văn A</div>
                            <div class="mb-2"><span class="font-medium">SĐT:</span> 0987654321</div>
                            <div><span class="font-medium">Địa chỉ:</span> 123 Đường Nguyễn Văn Linh, Quận Hải Châu, Đà Nẵng</div>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="font-medium mb-2">Lịch sử đơn hàng</h4>
                        <div id="order-history" class="relative pl-4">
                            <div class="timeline-item completed">
                                <div class="timeline-connector"></div>
                                <div class="font-medium">Đơn hàng đã giao thành công</div>
                                <div class="text-gray-500 text-sm">01/09/2025 - 15:20</div>
                                <div class="text-sm mt-1">Người nhận: Nguyễn Văn A</div>
                            </div>
                            <div class="timeline-item completed">
                                <div class="timeline-connector"></div>
                                <div class="font-medium">Đơn hàng đang giao</div>
                                <div class="text-gray-500 text-sm">01/09/2025 - 10:45</div>
                                <div class="text-sm mt-1">Nhân viên giao hàng: Trần Văn B - 0909123456</div>
                            </div>
                            <div class="timeline-item completed">
                                <div class="timeline-connector"></div>
                                <div class="font-medium">Đơn hàng đã được đóng gói</div>
                                <div class="text-gray-500 text-sm">31/08/2025 - 16:30</div>
                            </div>
                            <div class="timeline-item completed">
                                <div class="timeline-connector"></div>
                                <div class="font-medium">Đơn hàng đã được xác nhận</div>
                                <div class="text-gray-500 text-sm">31/08/2025 - 14:15</div>
                            </div>
                            <div class="timeline-item completed">
                                <div class="font-medium">Đơn hàng đã đặt</div>
                                <div class="text-gray-500 text-sm">31/08/2025 - 13:15</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button id="close-detail-btn" class="btn btn-secondary">Đóng</button>
                <button id="return-request-btn" class="btn btn-primary">
                    Yêu cầu Trả hàng/Hoàn tiền
                </button>
            </div>
        </div>
    </div>

    <!-- Modal Đánh giá sản phẩm -->
    <div id="review-display-modal" class="review-display-modal hidden">
        <div class="review-modal-content">
            <div class="review-modal-header">
                <h3 class="review-modal-title">Đánh Giá Của Bạn</h3>
                <button class="review-close-btn" id="close-review-display-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="review-modal-body">
                <div class="product-info">
                    <img src="https://via.placeholder.com/300x300?text=Trà+Đông+Trùng" alt="Trà Đông Trùng" class="product-image">
                    <div class="product-details">
                        <div class="product-name">Trà Đông Trùng Hạ Thảo Long Nhãn Tứ Vị An Nhiên</div>
                        <div class="product-order">Đơn hàng: <strong>ĐH230901</strong></div>
                        <div class="product-order">Ngày đặt: <strong>01/09/2025</strong></div>
                    </div>
                </div>
                
                <div class="review-details">
                    <div class="review-header">
                        <div>
                            <div class="reviewer">Nguyễn Văn A</div>
                            <div class="review-date">Đánh giá vào: 03/09/2025</div>
                        </div>
                        <div class="rating-display">
                            <i class="fas fa-star rating-star"></i>
                            <i class="fas fa-star rating-star"></i>
                            <i class="fas fa-star rating-star"></i>
                            <i class="fas fa-star rating-star"></i>
                            <i class="fas fa-star rating-star"></i>
                        </div>
                    </div>
                    
                    <div class="review-content">
                        <p>Tôi rất hài lòng với sản phẩm này! Trà có hương vị thơm ngon, đậm đà. Sản phẩm giúp tôi cải thiện sức khỏe rõ rệt sau 2 tuần sử dụng.</p>
                        <p class="mt-3">Bao bì đẹp mắt, gói hàng cẩn thận. Tôi sẽ tiếp tục ủng hộ sản phẩm của shop trong thời gian tới.</p>
                    </div>
                    
                    <h4 class="font-medium mt-6 mb-3">Hình ảnh đính kèm:</h4>
                    <div class="review-images-display">
                        <img src="https://via.placeholder.com/300x300?text=Hình+1" alt="Hình ảnh đánh giá" class="review-image">
                        <img src="https://via.placeholder.com/300x300?text=Hình+2" alt="Hình ảnh đánh giá" class="review-image">
                    </div>
                </div>
            </div>
            
            <div class="review-modal-footer">
                <button class="close-review-btn" id="close-review-display-btn">Đóng</button>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const orderDetailModal = document.getElementById('order-detail-modal');
        const closeModalBtn = document.getElementById('close-modal');
        const closeDetailBtn = document.getElementById('close-detail-btn');
        const viewDetailBtns = document.querySelectorAll('.view-detail');
        
        // Modal đánh giá
        const reviewDisplayModal = document.getElementById('review-display-modal');
        const closeReviewDisplayModal = document.getElementById('close-review-display-modal');
        const closeReviewDisplayBtn = document.getElementById('close-review-display-btn');
        const reviewBtns = document.querySelectorAll('.review-btn');
        
        // Hàm mở modal chi tiết
        function openOrderDetailModal() {
            orderDetailModal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }
        
        // Hàm đóng modal chi tiết
        function closeOrderDetailModal() {
            orderDetailModal.classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        // Hàm mở modal hiển thị đánh giá
        function openReviewDisplayModal() {
            reviewDisplayModal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }
        
        // Hàm đóng modal hiển thị đánh giá
        function closeReviewDisplayModalFunc() {
            reviewDisplayModal.classList.add('hidden');
            document.body.style.overflow = 'auto';
        }
        
        // Xử lý sự kiện cho nút xem chi tiết
        viewDetailBtns.forEach(btn => {
            btn.addEventListener('click', openOrderDetailModal);
        });
        
        // Xử lý sự kiện cho nút đánh giá
        reviewBtns.forEach(btn => {
            btn.addEventListener('click', openReviewDisplayModal);
        });
        
        // Xử lý sự kiện đóng modal chi tiết
        closeModalBtn.addEventListener('click', closeOrderDetailModal);
        closeDetailBtn.addEventListener('click', closeOrderDetailModal);
        
        // Xử lý sự kiện đóng modal đánh giá
        closeReviewDisplayModal.addEventListener('click', closeReviewDisplayModalFunc);
        closeReviewDisplayBtn.addEventListener('click', closeReviewDisplayModalFunc);
        
        // Đóng modal khi click bên ngoài
        window.addEventListener('click', (e) => {
            if (e.target === orderDetailModal) {
                closeOrderDetailModal();
            }
            if (e.target === reviewDisplayModal) {
                closeReviewDisplayModalFunc();
            }
        });
        
        // Xử lý hủy đơn hàng
        document.querySelectorAll('.cancel-order').forEach(btn => {
            btn.addEventListener('click', function() {
                const orderId = this.dataset.id;
                if (confirm(`Bạn có chắc chắn muốn hủy đơn hàng ${orderId}?`)) {
                    alert(`Đơn hàng ${orderId} đã được hủy thành công!`);
                    // Cập nhật giao diện
                    const orderCard = this.closest('.order-card');
                    const statusElement = orderCard.querySelector('.order-status');
                    statusElement.textContent = 'Đã hủy';
                    statusElement.className = 'order-status status-cancelled';
                    this.classList.add('hidden');
                }
            });
        });
        
        // Xử lý nút đặt hàng mới
        document.getElementById('new-order-btn').addEventListener('click', () => {
            alert('Chuyển hướng đến trang mua sắm...');
        });
        
        // Hàm gửi chiều cao về trang chủ (cho iframe)
        function sendHeightToParent() {
            const height = document.body.scrollHeight;
            if (window.parent !== window) {
                window.parent.postMessage({
                    type: 'resize',
                    height: height
                }, '*');
            }
        }
        
        // Gửi chiều cao khi trang tải xong
        window.addEventListener('load', sendHeightToParent);
        
        // Gửi chiều cao khi cửa sổ thay đổi kích thước
        window.addEventListener('resize', sendHeightToParent);
        
        // Trả lời khi nhận được yêu cầu từ trang chủ
        window.addEventListener('message', (event) => {
            if (event.data === 'getHeight') {
                sendHeightToParent();
            }
        });
    </script>
</body>
</html>